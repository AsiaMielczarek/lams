<?xml version="1.0" encoding="utf-8"?>
<ActivityComponent 
	xmlns="org.lamsfoundation.lams.author.components.activity.*" 
	xmlns:mx="http://www.adobe.com/2006/mxml"
	paddingTop="5" paddingRight="5" paddingBottom="5" paddingLeft="5"
	>
	
	<mx:Script>
		<![CDATA[
			import org.lamsfoundation.lams.author.controller.AuthorController;
			import org.lamsfoundation.lams.author.util.Constants;
			import mx.core.Application;
			import mx.managers.DragManager;
			import mx.events.DragEvent;
			import mx.collections.ArrayCollection;
			
			public var activities:ArrayCollection = new ArrayCollection();
			
			public var minActivities:int;
			public var maxActivities:int;
			public var description:String;
			
			// The dragEnter event handler for the Canvas container
            // enables dropping.
            private function dragEnterHandler(event:DragEvent):void {
                if (event.dragSource.hasFormat("dragActivity"))
                {
                    DragManager.acceptDragDrop(VBox(event.currentTarget));
                }
            }
            
            // The dragDrop event handler for the Canvas container
            // sets the Image control's position by 
            // "dropping" it in its new location.
            private function dragDropHandler(event:DragEvent):void {
                
                if (event.dragInitiator is ActivityComponent) {
                	var activityComponent:ActivityComponent;
                	activityComponent = event.dragInitiator as ActivityComponent;
                	activityComponent.canStartTransitions = false;
                	activityComponent.canAcceptTransitions = false;
                	activityComponent.disableTitle();
                	optionalArea.addChild(activityComponent);
                	activities.addItem(activityComponent);
              		activityComponent.updateTransitionPositions();
                } 
                
                // Return cursor state to normal
				Application.application.changeCursorState(Constants.CURSOR_STATE_NORMAL);                    
            }
            
           	override public function load(UIID:int):void {
            	super.load(UIID);
            	title = new Label();
            	title.text = Application.application.dictionary.getLabel("grouping_act_title");
            	this.disableTitle();
				this.addChild(title);
            }
			
		]]>
	</mx:Script>
	
	<mx:VBox id="vbox"
		horizontalAlign="center"
		paddingTop="5" paddingRight="5" paddingBottom="5" paddingLeft="5"
		backgroundColor="#C2D5FE" verticalGap="2"
    	borderStyle="solid" cornerRadius="10" dropShadowEnabled="true" shadowDirection="right"
		minWidth="90" minHeight="100"
		dragEnter="dragEnterHandler(event);" 
    	dragDrop="dragDropHandler(event);" 
		>
		<mx:Label text="Optional" fontWeight="bold" />
		
		<mx:VBox id="optionalArea" verticalAlign="middle" horizontalAlign="center" backgroundColor="#FFFFF8"
			verticalGap="0" height="100%" width="100%" borderStyle="solid" cornerRadius="10">
			
		</mx:VBox>
		
	</mx:VBox>
</ActivityComponent>
