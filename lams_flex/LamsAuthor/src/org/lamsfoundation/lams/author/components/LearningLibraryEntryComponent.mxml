<?xml version="1.0" encoding="utf-8"?>
<mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml" 
	width="100%" height="25" 
	verticalAlign="middle" 
	horizontalGap="0"
	mouseDown="mouseDown(event)"
	>
	
	<mx:Script>
		<![CDATA[
			import org.lamsfoundation.lams.author.util.AuthorUtil;
			import mx.core.Application;
			import org.lamsfoundation.lams.author.model.activity.Activity;
			import org.lamsfoundation.lams.author.model.activity.ActivityFactory;
			import org.lamsfoundation.lams.author.model.learninglibrary.LearningLibraryEntry;
			import org.lamsfoundation.lams.author.components.activity.*;
			
			import mx.controls.Image;
			import mx.controls.Label;
			import mx.core.DragSource;
			import mx.managers.DragManager;
			import mx.core.UIComponent;
			
			public var iconImage:Image;
			public var title:Label;
			public var learningLibraryEntry:LearningLibraryEntry;
					
			public function load(learningLibraryEntry:LearningLibraryEntry):void {
				this.learningLibraryEntry = learningLibraryEntry;
				iconImage = new Image();
				iconImage.source = learningLibraryEntry.icon;
				iconImage.height = 25;
				this.addChild(iconImage);
	
				title = new Label();
				title.text = learningLibraryEntry.title;
				this.addChild(title);
				
			}
	        
	        // Handles the start of a drag from the learning library
	        private function mouseDown(event:MouseEvent):void {
	        	var dragInitiator:LearningLibraryEntryComponent = event.currentTarget as LearningLibraryEntryComponent;
	        	var ds:DragSource = new DragSource();
	        	
	        	var learningLibraryEntry:LearningLibraryEntry = dragInitiator.learningLibraryEntry
	        	
	        	var activity:Activity = ActivityFactory.getActivityInstance(learningLibraryEntry, 0);
	        	var activityComponent:ActivityComponent = ActivityComponentFactory.getActivityComponentInstance(activity);
	        	activityComponent.initialize();
	        	
	        	ds.addData(activityComponent, "dragActivity"); 
	            DragManager.doDrag(dragInitiator, ds, event, activityComponent, 25, 15, 1.00, true);
	        }
		]]>
	</mx:Script>
</mx:HBox>
