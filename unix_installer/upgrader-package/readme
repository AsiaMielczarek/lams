LAMS 2.3.5 - Learning Activity Management System Upgrader
--------------------------------------------------------------------------------

This is an upgrader package for LAMS 2.3.4 to LAMS 2.3.5. Please read this 
document carefully before upgrading and make sure that you have a valid 
installation of LAMS 2.3.4 on your machine. Please also ensure that you have 
read and understood the terms of the license agreement.

NOTE TO SYSADMINS: If you are doing an upgrade and your users report problems in 
authoring, they may need to clear their browser cache. If you have a user see 
the message "Unknown toolbar item "UniversalKey" or if the user is sees the 
message "Congratulations, your content saved successfully!" but the close button
doesn't work, then please tell them to clear their cache.

CONTENTS
========

1) Required Software
2) Installation
3) Languages and Locales
4) Server Configuration
5) Startup and Shutdown
6) Backing up LAMS
7) Web Resources


1. Required Software
====================

You will require some software to be installed and/or running for LAMS 2.3.5 to 
install and run properly. These are listed below

LAMS 2.3.4
JDK 1.5 or 1.6
JBOSS-4.0.2 (Must be 4.0.2, newer and older versions have problems running LAMS)
MySql 5.x (Running)
Wildfire (Running - Required if you want to use chat tools)
ANT - Included in this package


2. Installation
===============

There are a few steps to updating LAMS on your computer.

Firstly you must set up a lams.properties file. If you previously installed 
lams using the unix installer, it will have backed up your lams.properties in 
the /etc/lams2/ directory. If your settings are unchanged, then simply run the 
updater and select yes when it asks you whether you want to use the 
lams.properties stored in /etc/lams2. Otherwise, you will need to edit the 
lams.properties in the root directory of the update package yourself. Open 
the lams.properties file in a text editor and follow the instructions to alter 
the settings. The default settings are in the lams.properties file already so 
you need not change a lot. Pay particular attention to the Installation Options 
section and the Essential settings section.

Take note that the majority of the projects are in lams.ear for instance 
lams-central.war and lams-common.jar, if you have made changes to any projects,
ensure that you back them up so you can re-apply them after the update.

Once you have finished editing lams.properties file you are ready to run the 
update script. Go to the root directory of the package and type:
> sudo ./update-lams.sh 

Follow the prompts in the install script. The installer will ask you whether you
want to stop LAMS before updating. Unless you have already done so yourself, it
is HIGHLY RECOMMENDED that you let the upgrader run the shutdown script for 
LAMS, otherwise the upgrade will not run correctly. Also it is recommended that
you backup LAMS before the upgrade, the upgrade script gives you this option, or
you are also free to do so yourself.

NOTE: If you are installing a production server, It is strongly recommended 
that you remove the jmx-console web applications as they can be a security risk.
To do so, remove the jboss-4.0.2/server/default/management directory and the 
jboss-4.0.2/server/default/jmx-console.war directory.


3. Languages and Locales
========================

In LAMS 2.3.5 you can set the default language of your server to be one of many
languages, and more to come, see http://lamscommunity.org

Look out for UNIX language packs to add to your list of language locales

The locale options for LAMS available are listed below, simply put in
your lams.properties file (under Installation Options):

LOCALE - (locale)
LOCALE_DIRECTION - (locale direction)

Language		Locale	Locale Direction
------------------------------------------------
English	(Australia)		en_AU	LTR
Español	(Spanish)		es_ES	LTR
Deutsch	(German)		de_DE	LTR
简体中文 (Chinese Simplified)	zh_CN	LTR
Français (French)		fr_FR	LTR
Italiano (Italian)		it_IT	LTR
Norsk (Norwegian)		no_NO	LTR
Svenska	(Swedish)		sv_SE	LTR
한국어 (Korean)			ko_KR	LTR
Polski (Polish)			pl_PL	LTR
Português (Portuguese Brazil)	pt_BR	LTR
Tiếng Việt (Vietnamese)		vi_VN	LTR
Chinese (Taiwan)		zh_TW	LTR
Arabic (عربي) (Jordan)		ar_JO	RTL
Ελληνικά (Greek)		el_GR	LTR
日本語 (Japanese)		ja_JP	LTR
Malay (Malaysian)		ms_MY	LTR
Русский (Russian)		ru_RU	LTR
Türkçe (Turkish)		tr_TR	LTR

4. Production Server Configuration
============================

For single user installations, (i.e. personal use on your desktop), please
ignore this section - LAMS should run fine using the default settings.

You may need to increase the limit for database connections, this can be
done at (jboss directory)/server/default/deploy/mysql-ds.xml. Set the
max-pool-size option to what you want, but it must be less than or equal to
the max connections in mysql-Xms

If your server starts reporting out of memory errors in the JBoss server.log
file, you may need to increase the JVM memory settings for your server.
This can be altered in the (jboss directory)/bin/run-lams.sh script.

More information can be found at:
http://wiki.lamsfoundation.org/display/lamsdocs/Production+Server+Settings 


5. Startup and Shutdown
=======================

To start LAMS go to (jboss directory)/bin and type:
>sudo ./run-lams.sh 

After a couple of minutes LAMS will have started. In your browser type the 
server URL that you specified in the lams.configuration file, and you should be 
at the lams homepage.

To shutdown LAMS go to (jboss directory)/bin and type;
> sudo ./shutdown.sh -S

LAMS will take a few moments to shut down. To check if LAMS has shut 
down correctly, type the following on Linux:
> ps -ef | grep java

Or type the following on Macintosh
> ps -A | grep Java

If you aren't sure which version of 'ps' to use, try the '-ef' version and if
that gives and error 'ps: illegal option --f" then try the -A version.


If you can see the LAMS process still running, type:
> sudo kill (pid) 
Where pid is the process id listed next to the LAMS process

Be careful to type the correct (pid). If you type the wrong number, you will 
stop another process on your server, and as you are using sudo you could stop 
an important process!

6. Backing up LAMS
================== 

To backup your LAMS installation manually, simply follow the following steps

1) Backup your jboss-4.0.2 directory where LAMS is installed
(/usr/local/jboss-4.0.2 by default)

2) Backup your uploaded file repositories
(/var/opt/lams by default)

3) Backup /etc/lams2

4) Dump the database by executing the following command. Fill in your own 
backup directory

<sqldir>/mysqldump --hex-blob -u<dbuser> -p<dbpassword> <dbname> > <backupdir>/dump.sql


7. Web Resources
================

Unix Installer help wiki

	http://wiki.lamsfoundation.org/display/lamsdocs/Unix+Installer+Help
	
Backing up LAMS and reverting LAMS

    http://wiki.lamsfoundation.org/display/lamsdocs/Revert+To+Other+Backup
	
LAMS developer-oriented information

	http://wiki.lamsfoundation.org/display/lams

LAMS help documents

	http://wiki.lamsfoundation.org/display/lamsdocs

Educational and technical forums for help and discussion
				
	http://www.lamscommunity.org

LAMS bug tracker			

	https://bugs.lamsfoundation.org

LAMS Foundation					
	
	http://www.lamsfoundation.org
