<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN" "http://jakarta.apache.org/struts/dtds/struts-config_1_2.dtd">

<struts-config>

  <!-- ========== Data Sources Definitions =================================== -->
  <!--
    Define your Struts data sources in a file called struts-data-sources.xml and place
    it in your merge directory.
  -->

  <!-- ========== Form Bean Definitions =================================== -->
  <form-beans>

   <form-bean name ="SbmtAuthoringForm" type="org.apache.struts.validator.DynaValidatorForm">
	<form-property name="title" 
				   type="java.lang.String" />
	<form-property name="instructions" 
				   type="java.lang.String" />
	<form-property name="offlineInstruction" 
				   type="java.lang.String" />
	<form-property name="onlineInstruction" 
				   type="java.lang.String" />
	<form-property name="toolContentID"
				   type="java.lang.Long"/>
	<form-property name="lockOnFinished"
				   type="java.lang.String"/>		   
	<form-property name="onlineFile"
				   type="org.apache.struts.upload.FormFile"/>
	<form-property name="offlineFile"
				   type="org.apache.struts.upload.FormFile"/>

	<form-property name="currentTab"
				   type="java.lang.String"/>
	<form-property name="dispatch"
				   type="java.lang.String"/>
</form-bean>

<form-bean name="SbmtLearnerForm" type="org.apache.struts.validator.DynaValidatorForm">
	<form-property name="filePath"
				   type="org.apache.struts.upload.FormFile"/>
	<form-property name="fileDescription"
				   type="java.lang.String"/>
	<form-property name="toolSessionID"
				   type="java.lang.Long"/>
	<form-property name="userID"
				   type="java.lang.Long"/>		

	<form-property name="filesUploaded"
				   type="java.util.List"/>
</form-bean>

<form-bean name="SbmtMonitoringForm" type="org.apache.struts.action.DynaActionForm">

	<form-property name="toolSessionID"
				   type="java.lang.Long"/>
	<form-property name="toolContentID"
				   type="java.lang.Long"/>
	<form-property name="userID"
				   type="java.lang.Long"/>		

	<form-property name="currentTab"
				   type="java.lang.String"/>
	<form-property name="method"
				   type="java.lang.String"/>
</form-bean>
  </form-beans>

  <!-- ========== Global Exceptions Definitions =================================== -->
  <!--
    Define your exceptions in a file called global-exceptions.xml and place
    it in your merge directory.
  -->

  <!-- ========== Global Forward Definitions =================================== -->
  <!--
    Define your forwards in a file called global-forwards.xml and place
    it in your merge directory.
  -->

  <!-- ========== Action Mapping Definitions =================================== -->
   <action-mappings>
    <action
      path="/learner"
      type="org.lamsfoundation.lams.tool.sbmt.web.LearnerAction"
      name="SbmtLearnerForm"
      scope="request"
      input="/learner/sbmtLearner.jsp"
      parameter="method"
      unknown="false"
      validate="false"
    >
      <forward
        name="upload"
        path="/learner/sbmtLearner.jsp"
        redirect="false"
      />
      <forward
        name="defineLater"
        path="/learner/definelater.jsp"
        redirect="false"
      />
      <forward
        name="runOffline"
        path="/learner/runoffline.jsp"
        redirect="false"
      />
    </action>
    <action
      path="/monitoring"
      type="org.lamsfoundation.lams.tool.sbmt.web.MonitoringAction"
      name="SbmtMonitoringForm"
      scope="request"
      parameter="method"
      unknown="false"
      validate="true"
    >
      <forward
        name="userlist"
        path="/monitoring/monitoring.jsp"
        redirect="false"
      />
      <forward
        name="userMarks"
        path="/monitoring/monitoring.jsp"
        redirect="false"
      />
      <forward
        name="updateMarks"
        path="/monitoring/monitoring.jsp"
        redirect="false"
      />
      <forward
        name="allUserMarks"
        path="/monitoring/monitoring.jsp"
        redirect="false"
      />
      <forward
        name="instructions"
        path="/monitoring/monitoring.jsp"
        redirect="false"
      />
      <forward
        name="showActivity"
        path="/monitoring/monitoring.jsp"
        redirect="false"
      />
      <forward
        name="success"
        path="/monitoring/monitoring.jsp"
        redirect="false"
      />
      <forward
        name="load"
        path="/monitoring/monitoring.jsp"
        redirect="false"
      />
      <forward
        name="statistic"
        path="/monitoring/monitoring.jsp"
        redirect="false"
      />
    </action>
    <action
      path="/deletefile"
      type="org.lamsfoundation.lams.tool.sbmt.web.DeleteFileAction"
      parameter="method"
      unknown="false"
      validate="true"
    >
    </action>
    <action
      path="/authoring"
      type="org.lamsfoundation.lams.tool.sbmt.web.AuthoringAction"
      name="SbmtAuthoringForm"
      scope="session"
      input="/authoring/authoring.jsp"
      parameter="dispatch"
      unknown="false"
      validate="true"
    >
      <exception
        key="authoring.exception"
        type="org.lamsfoundation.lams.tool.sbmt.exception.SubmitFilesException"
        path="/authoring/authoring.jsp"
      />
      <forward
        name="success"
        path="/authoring/authoring.jsp"
        redirect="false"
      />
    </action>

   		<!-- ========== Action Mapping Definitions ============================== -->
		<action path="/definelater"
			type="org.lamsfoundation.lams.tool.sbmt.web.AuthoringAction"
			name="emptyForm" 
			scope="request" 
			parameter="method" 
			validate="false">
			      <forward
			        name="definelater"
			        path="/authoring/definelater.jsp"
			        redirect="false"
			      />
			      <forward
			        name="forbidden"
			        path="/authoring/definelaterforbid.jsp"
			        redirect="false"
			      />
		</action>

		<!-- ========== BEGIN: Common ============================== -->
		<action path="/clearsession"
			type="org.lamsfoundation.lams.tool.sbmt.web.ClearSessionAction">
		</action>
  </action-mappings>

   <!-- Define your Struts controller in a file called struts-controller.xml and place it in your merge directory. -->

  <message-resources parameter="org.lamsfoundation.lams.tool.sbmt.ApplicationResources" />

    <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
    <set-property property="pathnames"
                     value="/WEB-INF/struts/validator-rules.xml,
                            /WEB-INF/struts/validation.xml"/>
  </plug-in>

</struts-config>
