<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN" "http://jakarta.apache.org/struts/dtds/struts-config_1_2.dtd">

<struts-config>

  <!-- ========== Data Sources Definitions =================================== -->
  <!--
    Define your Struts data sources in a file called struts-data-sources.xml and place
    it in your merge directory.
  -->

  <!-- ========== Form Bean Definitions =================================== -->
  <form-beans>

   <form-bean name ="SbmtAuthoringForm" type="org.apache.struts.action.DynaActionForm">
	<form-property name="title" 
				   type="java.lang.String" />
	<form-property name="instructions" 
				   type="java.lang.String" />
	<form-property name="offlineInstruction" 
				   type="java.lang.String" />
	<form-property name="onlineInstruction" 
				   type="java.lang.String" />
	<form-property name="toolContentID"
				   type="java.lang.Long"/>
	<form-property name="lockOnFinished"
				   type="java.lang.String"/>		   
	<form-property name="onlineFile"
				   type="org.apache.struts.upload.FormFile"/>
	<form-property name="offlineFile"
				   type="org.apache.struts.upload.FormFile"/>
</form-bean>

<form-bean name="SbmtLearnerForm" type="org.apache.struts.validator.DynaValidatorForm">
	<form-property name="filePath"
				   type="org.apache.struts.upload.FormFile"/>
	<form-property name="fileDescription"
				   type="java.lang.String"/>
	<form-property name="toolSessionID"
				   type="java.lang.Long"/>
	<form-property name="userID"
				   type="java.lang.Long"/>		

	<form-property name="filesUploaded"
				   type="java.util.List"/>
</form-bean>

<form-bean name="emptyForm" type="org.apache.struts.action.DynaActionForm"/>
  </form-beans>

  <!-- ========== Global Exceptions Definitions =================================== -->
  <!--
    Define your exceptions in a file called global-exceptions.xml and place
    it in your merge directory.
  -->

  <!-- ========== Global Forward Definitions =================================== -->
  <!--
    Define your forwards in a file called global-forwards.xml and place
    it in your merge directory.
  -->

  <!-- ========== Action Mapping Definitions =================================== -->
   <action-mappings>
    <action
      path="/learner"
      type="org.lamsfoundation.lams.tool.sbmt.web.LearnerAction"
      name="SbmtLearnerForm"
      scope="request"
      input="/learner/sbmtLearner.jsp"
      parameter="method"
      unknown="false"
      validate="false"
    >
      <forward
        name="upload"
        path="/learner/sbmtLearner.jsp"
        redirect="false"
      />
    </action>
    <action
      path="/monitoring"
      type="org.lamsfoundation.lams.tool.sbmt.web.MonitoringAction"
      name="emptyForm"
      scope="request"
      parameter="method"
      unknown="false"
      validate="true"
    >
      <forward
        name="userlist"
        path="/monitoring/alluserlist.jsp"
        redirect="false"
      />
      <forward
        name="userReport"
        path="/monitoring/usermarkslist.jsp"
        redirect="false"
      />
      <forward
        name="updateMarks"
        path="/monitoring/updatemarks.jsp"
        redirect="false"
      />
      <forward
        name="report"
        path="/monitoring/viewallmarks.jsp"
        redirect="false"
      />
      <forward
        name="status"
        path="/Status.jsp"
        redirect="false"
      />
    </action>
    <action
      path="/authoring"
      type="org.lamsfoundation.lams.tool.sbmt.web.AuthoringAction"
      name="SbmtAuthoringForm"
      scope="request"
      input="/authoring/authoring.jsp"
      parameter="action"
      unknown="false"
      validate="true"
    >
      <exception
        key="authoring.exception"
        type="org.lamsfoundation.lams.tool.sbmt.exception.SubmitFilesException"
        path="/authoring/authoring.jsp"
      />
      <forward
        name="success"
        path="/authoring/success.jsp"
        redirect="false"
      />
    </action>

    <!-- If you have non XDoclet actions, define them in a file called struts-actions.xml and place it in your merge directory. -->
  </action-mappings>

   <!-- Define your Struts controller in a file called struts-controller.xml and place it in your merge directory. -->

  <message-resources parameter="org.lamsfoundation.lams.tool.sbmt.SbmtResources" />

    <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
    <set-property property="pathnames"
                     value="/WEB-INF/struts/validator-rules.xml,
                            /WEB-INF/struts/validation.xml"/>
  </plug-in>

</struts-config>
