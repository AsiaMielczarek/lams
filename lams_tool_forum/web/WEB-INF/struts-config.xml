<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN" "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">

<struts-config>

  <!-- ========== Data Sources Definitions =================================== -->
  <!--
    Define your Struts data sources in a file called struts-data-sources.xml and place
    it in your merge directory.
  -->

  <!-- ========== Form Bean Definitions =================================== -->
  <form-beans>

    <form-bean
      name="messageForm"
      type="org.lamsfoundation.lams.tool.forum.forms.MessageForm"
    />
    <form-bean
      name="forumForm"
      type="org.lamsfoundation.lams.tool.forum.forms.ForumForm"
    />

  </form-beans>

  <!-- ========== Global Exceptions Definitions =================================== -->
      <!-- B: global exceptions -->
    <global-exceptions>
	    <exception key="error.operation.failed"
		    type="java.lang.Exception" path="tiles:/error"/>
    </global-exceptions>
    <!-- B: end of global exceptions -->

  <!-- ========== Global Forward Definitions =================================== -->
  	<!-- B: global forwards -->
	<global-forwards>
        <forward   name="forum.error"	path="tiles:/error.jsp"/>
	</global-forwards>
	<!-- E: global forwards -->

  <!-- ========== Action Mapping Definitions =================================== -->
   <action-mappings>

   	 <!-- ========== Action Mapping Definitions ============================== -->

    <action path="/index"
		type="org.apache.struts.actions.ForwardAction" parameter="tiles:/layout" />

	<action path="/error"
		type="org.apache.struts.actions.ForwardAction"
		parameter="tiles:/error" />

	<action path="/blank"
		type="org.apache.struts.actions.ForwardAction"
		parameter="tiles:/blank" />

      	<!-- Forum  related actions -->

	    <action path="/authoring/forum/create"
		    type="org.apache.struts.actions.ForwardAction" parameter="tiles:/authoring/forum/create" />

	    <action path="/authoring/forum/edit"
		    type="org.apache.struts.actions.ForwardAction" parameter="tiles:/authoring/forum/edit" />

        <action    path="/authoring/forum/instructions"
        	type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
			name="forumForm"
			validate="true"
            input="/authoring/forum/create.do?selected=2"
			parameter="instructions"
			scope="session">
            <forward name="success"		path="/authoring/forum/create.do?selected=2"/>
        </action>

        <action    path="/authoring/forum/editInstructions"
            type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
            name="forumForm"
            validate="true"
            input="/authoring/forum/edit.do?selected=2"
            parameter="instructions"
            scope="session">
            <forward name="success"		path="/authoring/forum/edit.do?selected=2"/>
        </action>

        <action    path="/authoring/forum/advanced"
        	type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
			name="forumForm"
			validate="true"
            input="/authoring/forum/create.do?selected=1"
			parameter="advanced"
			scope="session">
            <forward name="success"		path="/authoring/forum/create.do?selected=1"/>
        </action>

        <action    path="/authoring/forum/editAdvanced"
        	type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
			name="forumForm"
			validate="true"
            input="/authoring/forum/edit.do?selected=1"
			parameter="advanced"
			scope="session">
            <forward name="success"		path="/authoring/forum/edit.do?selected=1"/>
        </action>

        <action    path="/authoring/forum/createForum"
			type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
			name="forumForm"
			validate="true"
            input="tiles:/authoring/forum/create"
			parameter="createForum"
			scope="session">
            <forward name="success"		path="tiles:/authoring/forum/edit"/>
        </action>

		<action    path="/authoring/forum/editForum"
			type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
			name="forumForm"
			validate="true"
            input="tiles:/authoring/forum/edit.do"
			parameter="editForum"
			scope="session">
			<forward name="success"		path="tites:/authoring/forum/edit"/>
		</action>

        <action    path="/authoring/forum/deleteAttachment"
			type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
			name="forumForm"
			validate="true"
			parameter="deleteAttachment"
			scope="session">
            <forward name="success"		path="/authoring/forum/create.do?selected=2"/>
        </action>

        <action    path="/authoring/forum/edit/deleteAttachment"
			type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
			name="forumForm"
			validate="true"
			parameter="deleteAttachment"
			scope="session">
            <forward name="success"		path="/authoring/forum/edit.do?selected=2"/>
        </action>

	    <action path="/authoring/forum/newTopic"
		    type="org.apache.struts.actions.ForwardAction" parameter="tiles:/authoring/forum/newTopic" />

		<action    path="/authoring/forum/createTopic"
			type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
			name="messageForm"
			validate="true"
            input="tiles:/authoring/forum/newTopic"
			parameter="createTopic"
			scope="request">
            <forward name="success"		path="tiles:/authoring/forum/create"/>
		</action>

        <action    path="/authoring/forum/deleteTopic"
			type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
            input="tiles:/authoring/forum/create"
			parameter="deleteTopic"
            scope="request">
            <forward name="success"		path="tiles:/authoring/forum/create"/>
        </action>

        <action    path="/authoring/forum/edit/deleteTopic"
			type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
            input="tiles:/authoring/forum/create"
			parameter="deleteTopic"
            scope="request">
            <forward name="success"		path="tiles:/authoring/forum/edit"/>
        </action>

        <action    path="/authoring/forum/getForum"
			type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
			validate="true"
			parameter="getForum"
			scope="request">
			<forward name="success"		path="tiles:/authoring/forum/edit"/>
		</action>

		<action    path="/authoring/forum/delete"
			type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
			parameter="deleteForum"
			scope="request">
			<forward name="success"		path="titles:/authoring/forum/success"/>
		</action>

		<action    path="/authoring/message/editMessage"
			type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
			name="messageForm"
			validate="true"
            input="tiles:/authoring/message/editMessage"
			parameter="editMessage"
			scope="request">
			<forward name="success"		path="tiles:/authoring/forum/success"/>
		</action>
		<!-- Message related actions -->

    	<action    path="/learning/forum/open"
			type="org.lamsfoundation.lams.tool.forum.actions.LearningAction"
			parameter="openForum"
			scope="request">
			<forward name="success"		path="tiles:/learning/forum/open"/>
		</action>

    	<action    path="/learning/message/open"
			type="org.lamsfoundation.lams.tool.forum.actions.LearningAction"
			parameter="openMessage"
			scope="request">
			<forward name="success"		path="tiles:/learning/message/open"/>
		</action>

    	<action    path="/learning/message/post"
		     type="org.lamsfoundation.lams.tool.forum.actions.LearningAction"
			parameter="post"
			scope="request">
			<forward name="success"		path="tiles:/learning/message/post"/>
		</action>

		<action    path="/learning/message/reply"
			type="org.lamsfoundation.lams.tool.forum.actions.LearningAction"
			name="messageForm"
			validate="true"
			input="tiles:/learning/message/post"
			parameter="reply"
			scope="request">
			<forward name="success"		path="/learning/message/open.do"/>
		</action>

		<action    path="/learning/message/editMessage"
			type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
			name="messageForm"
			validate="true"
			input="tiles:/learning/message/edit"
			parameter="editMessage"
			scope="request">
			<forward name="success"		path="/learning/message/open.do"/>
		</action>

		<action    path="/learning/message/delete"
			type="org.lamsfoundation.lams.tool.forum.actions.ForumAction"
			parameter="deleteMessage"
			scope="request">
			<forward name="success"		path="/learing/message/open.do"/>
		</action>

  </action-mappings>

   <!-- Define your Struts controller in a file called struts-controller.xml and place it in your merge directory. -->

  <!-- Put message resources here -->
<message-resources parameter="ApplicationResources"/>

  <!-- Put custom struts plugin here -->
<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
	<set-property property="pathnames"
		value="/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml" />
</plug-in>
<plug-in className="org.apache.struts.tiles.TilesPlugin">
	<set-property property="definitions-config" value="/WEB-INF/tiles-defs.xml"/>
</plug-in>
<!--
<plug-in className="net.sf.struts.saif.SAIFPlugin">
	<set-property property="interceptor-config" value="/WEB-INF/interceptor-config.xml" />
</plug-in>
-->

</struts-config>
